var KEY_LEFT=37,KEY_UP=38,KEY_RIGHT=39,KEY_DOWN=40,KEY_SPACE=32,KEY_Z=90,KEY_X=88,PLAYER_MOVEMENT=4,PLAYER_BOTTOM=80,LASER_SPEED=50,SHOOTING_INTERVAL=10,BOOSTED_SHOOT=1,JUMP_HEIGHT=20,JUMP=20,lastLoopRun=0,createSprite=function(e,t,a,o,l){var r=new Object;return r.element=e,r.x=t,r.y=a,r.w=o,r.h=l,r},controller=new Object;function toggleKey(e,t){e==KEY_LEFT&&(controller.left=t),e==KEY_RIGHT&&(controller.right=t),e==KEY_UP&&(controller.up=t),e==KEY_DOWN&&(controller.down=t),e==KEY_SPACE&&(controller.space=t),e==KEY_Z&&(controller.z=t),e==KEY_X&&(controller.x=t)}var item=new Object;item.isPlayerLeft=!1,item.isplayerRight=!0,item.shootingFireCount=0,item.playerShadowYDecreement=.4,item.bodyActionBeforeShoot=0,item.headActionBeforShoot=17,item.handActionAfterShoot=36,item.effectYRegulator=0,item.bodyBackground=document.getElementById("Bbackground"),item.CurrentWindowWidth=1319;var bodyRightIncreement=0,headRight=17,handRight=36;function playerRight(){player.x+=PLAYER_MOVEMENT,mainObject.style.transform="scaleX(1)",playerShadow.x=player.x-20,ovalObject.style.backgroundImage="url('objects/laserOvalRight.png')",shootObject.style.backgroundImage="url('objects/shootingEffectRight.png')",laserObject.style.backgroundImage="url('objects/laserRight.png')",bodyRightIncreement+=.5,headRight+=.5,handRight+=.5,playerHand.style.left=handRight+"px",handRight>=39&&(handRight=39),playerHead.style.left=headRight+"px",headRight>=22&&(headRight=22),playerBody.style.transform="rotate("+bodyRightIncreement+"deg)",bodyRightIncreement>=5&&(bodyRightIncreement=5),wheelLG.classList.add("animateWheelRight"),wheelMD.classList.add("animateWheelRight"),wheelSM.classList.add("animateWheelRight"),player.x<1100&&player.x>100&&(planets.x-=.1)}var bodyLeftIncreement=0,headLeft=17,handLeft=36;function playerLeft(){player.x-=PLAYER_MOVEMENT,item.playerShadowYDecreement=-.4,mainObject.style.transform="scaleX(-1)",playerShadow.x=player.x,ovalObject.style.backgroundImage="url('objects/laserOvalLeft.png')",shootObject.style.backgroundImage="url('objects/shootingEffectLeft.png')",laserObject.style.backgroundImage="url('objects/laserLeft.png')",bodyLeftIncreement+=.5,headLeft+=.5,handLeft+=.5,playerHand.style.left=handLeft+"px",handLeft>=39&&(handLeft=39),playerHead.style.left=headLeft+"px",headLeft>=22&&(headLeft=22),playerBody.style.transform="rotate("+bodyLeftIncreement+"deg)",bodyLeftIncreement>=5&&(bodyLeftIncreement=5),wheelLG.classList.add("animateWheelLeft"),wheelMD.classList.add("animateWheelLeft"),wheelSM.classList.add("animateWheelLeft"),player.x<1100&&player.x>100&&(planets.x+=.1)}var handAngle=0,handTop=56;function handUP(){handTop-=.6,--handAngle<=-23&&handAngle<=41&&(handAngle=-23,handTop=41),playerHand.style.top=handTop+"px",playerHand.style.transform="rotate("+handAngle+"deg)",playerHead.style.transform="rotate("+.6*handAngle+"deg)"}function handDown(){handTop+=.6,++handAngle>=0&&handTop>=56&&(handAngle=0,handTop=56),playerHand.style.top=handTop+"px",playerHand.style.transform="rotate("+handAngle+"deg)",playerHead.style.transform="rotate("+.6*handAngle+"deg)"}function Jump(){JUMP-=.8,player.y+=JUMP,playerShadow.h-=.089*JUMP,playerFoot.style.transform="rotate(10deg)",playerHead.style.transform="rotate(-15deg)",player.y<=PLAYER_BOTTOM&&(player.y=PLAYER_BOTTOM,playerFoot.style.transform="rotate(0deg)",playerHead.style.transform="rotate(0deg)",JUMP=JUMP_HEIGHT,playerShadow.h=38,playerShadow.x=player.x)}var opacityDecreement=0;function shootingObject(e,t,a,o,l,r,n,i,s,y,d,h,c,p,m){item.effectYRegulator+=e,item.shootingFireCount++,item.bodyActionBeforeShoot+=t,item.headActionBeforShoot+=a,laserOval.x=player.x+o,laserOval.y=player.y+l+Math.floor(handAngle)*r,ovalObject.style.transform="rotate("+handAngle*n+"deg)",shootObject.style.display="block",shootEffect.y=player.y+(85-item.effectYRegulator)+Math.floor(handAngle)*i,shootEffect.x=player.x+s,shootEffect.w=item.shootingFireCount*y,shootEffect.h=item.shootingFireCount*d,playerBody.style.transform="rotate("+item.bodyActionBeforeShoot+"deg)",playerHead.style.left=item.headActionBeforShoot+"px",SHOOTING_INTERVAL=player.x<.33*item.CurrentWindowWidth&&item.isplayerRight?10*BOOSTED_SHOOT:10,player.x>.33*item.CurrentWindowWidth&&(SHOOTING_INTERVAL=15*BOOSTED_SHOOT),player.x>.66*item.CurrentWindowWidth&&(SHOOTING_INTERVAL=20*BOOSTED_SHOOT),item.shootingFireCount>=SHOOTING_INTERVAL&&(console.log(item.CurrentWindowWidth),player.y>100&&(player.x+=m),laserObject.style.display="block",laserSound.playbackRate=1,laserSound.currentTime=0,laserSound.play(),opacityDecreement=1,ovalObject.style.opacity=opacityDecreement,laser.x=player.x+h,laser.y=player.y+c+Math.floor(handAngle)*p,item.shootingFireCount=0,item.bodyActionBeforeShoot=0,item.headActionBeforShoot=17,playerHand.style.left=item.handActionAfterShoot-3+"px",shootEffect.w=0,shootEffect.h=0,item.effectYRegulator=0)}function ShootLeft(){shootingObject(.9,.2,.4,-25,71,-1.6,-1,-1.55,-20,2.2,2.2,-75,84,-2.3,5)}function ShootRight(){shootingObject(1.2,.2,.4,121,70,-1.6,1,-1.8,130,2.2,2.2,138,85,-2,-5)}function handleControls(){controller.left&&(playerLeft(),item.isPlayerLeft=!0,item.isplayerRight=!1),controller.right&&(playerRight(),item.isPlayerLeft=!1,item.isplayerRight=!0),controller.up&&handUP(),controller.down&&handDown(),controller.space&&(PLAYER_MOVEMENT=8,BOOSTED_SHOOT=.5,LASER_SPEED=200),controller.z&&Jump(),controller.x&&laser.x>=item.CurrentWindowWidth&&ShootRight(),controller.x&&laser.x<=-50&&ShootLeft(),EnsureBounds()}function EnsureBounds(){player.x<=0&&(player.x=0),player.x>=1240&&(player.x=1240)}function SetPosition(e){var t=document.getElementById(e.element);t.style.bottom=e.y+"px",t.style.left=e.x+"px",t.style.width=e.w+"px",t.style.height=e.h+"px"}function showSprites(){SetPosition(player),SetPosition(playerShadow),SetPosition(shootEffect),SetPosition(laserOval),SetPosition(planets),SetPosition(laser)}function updatePosition(){if(item.isplayerRight&&(laser.x+=LASER_SPEED,laser.y-=Math.sin(Math.PI*handAngle/165)*LASER_SPEED,shootEffect.x=player.x+130,shootEffect.y=player.y+82+-1.6*Math.floor(handAngle),shootObject.style.display="none",laserObject.style.transform="rotate("+handAngle+"deg)",laser.x>=item.CurrentWindowWidth&&(laser.x=item.CurrentWindowWidth,laser.y=-800)),item.isPlayerLeft&&(laser.x-=LASER_SPEED,laser.y-=Math.sin(Math.PI*handAngle/180)*LASER_SPEED,shootEffect.x=player.x-5,shootEffect.y=player.y+82+-1.6*Math.floor(handAngle),shootObject.style.display="none",laserObject.style.transform="rotate("+-1*handAngle+"deg)",laser.x<=-50&&(laser.x=-50,laser.y=-800)),opacityDecreement<=1&&(opacityDecreement-=.04,ovalObject.style.opacity=opacityDecreement,opacityDecreement<=0&&(opacityDecreement=0)),controller.right||(bodyRightIncreement=0,headRight=17,handRight=36,playerHand.style.left="36px",playerHead.style.left="17px",playerBody.style.transform="rotate(0deg)",wheelLG.classList.remove("animateWheelRight"),wheelMD.classList.remove("animateWheelRight"),wheelSM.classList.remove("animateWheelRight")),controller.left||(bodyLeftIncreement=0,headLeft=17,handleft=36,playerHand.style.left="36px",playerHead.style.left="17px",playerBody.style.transform="rotate(0deg)",wheelLG.classList.remove("animateWheelLeft"),wheelMD.classList.remove("animateWheelLeft"),wheelSM.classList.remove("animateWheelLeft")),controller.space||(PLAYER_MOVEMENT=4,BOOSTED_SHOOT=1,SHOOTING_INTERVAL=10,LASER_SPEED=50),controller.z||(item.jumpKeyPressInterval=0),!controller.z&&player.y>PLAYER_BOTTOM&&(JUMP-=.8,player.y+=JUMP,playerShadow.h-=.089*JUMP,player.y<PLAYER_BOTTOM))return player.y=PLAYER_BOTTOM,playerShadow.h=38,playerShadow.x=player.x-10,playerFoot.style.transform="rotate(0deg)",playerHead.style.transform="rotate(0deg)",mainObject.classList.remove("animatePlayer"),null;controller.x||(item.shootingFireCount=0,shootEffect.w=0,shootEffect.h=0,item.effectYRegulator=0),item.CurrentWindowWidth=1366}function loop(){(new Date).getTime()-lastLoopRun>10&&(showSprites(),updatePosition(),handleControls(),lastLoopRun=(new Date).getTime()),setTimeout("loop();",2)}document.onkeydown=function(e){toggleKey(e.keyCode,!0)},document.onkeyup=function(e){toggleKey(e.keyCode,!1)};var player=createSprite("player",200,PLAYER_BOTTOM,null,null),mainObject=document.getElementById("player"),playerShadow=createSprite("playerShadow",180,65,145,38),playerFoot=document.getElementById("playerFoot"),wheelLG=document.getElementById("wheelLG"),wheelMD=document.getElementById("wheelMD"),wheelSM=document.getElementById("wheelSM"),playerBody=document.getElementById("playerBody"),playerHand=document.getElementById("playerHand"),playerHead=document.getElementById("playerHead"),laser=createSprite("laser",-100,-2e3,null,null),laserObject=document.getElementById("laser"),laserSound=new Audio("objects/laserSound.mp3"),shootEffect=createSprite("shootEffect",50,0,null,null),shootObject=document.getElementById("shootEffect"),laserOval=createSprite("laserOval",-100,-20,null,null),ovalObject=document.getElementById("laserOval"),planets=createSprite("planets",0,null,null,null);loop();